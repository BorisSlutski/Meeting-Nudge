<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self'; script-src 'self'; img-src 'self' data:;">
  <title>Meeting Nudge - Settings</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <header>
      <div style="display: flex; align-items: center; justify-content: center; gap: 16px; margin-bottom: 8px;">
        <img src="../assets/owl-icon.png" alt="Owl Icon" style="width: 64px; height: 64px;">
        <h1 style="margin: 0;">Meeting Nudge</h1>
      </div>
      <p class="subtitle">Never miss a meeting again</p>
    </header>

    <main>
      <!-- Calendar Connections -->
      <section class="card">
        <h2>Calendar Connections</h2>
        
        <div class="connection-item">
          <div class="connection-info">
            <span class="connection-icon">G</span>
            <div>
              <strong>Google Calendar</strong>
              <p class="connection-status" id="google-status">Not connected</p>
            </div>
          </div>
          <button class="btn" id="google-btn">Connect</button>
        </div>
        
        <button class="btn btn-secondary sync-button" id="sync-btn">
          Sync Now
        </button>
      </section>

      <!-- Upcoming Meetings -->
      <section class="card">
        <h2>Upcoming Meetings</h2>
        <div id="upcoming-events" class="events-list">
          <p class="empty-state">No upcoming meetings</p>
        </div>
      </section>

      <!-- Reminder Settings -->
      <section class="card">
        <h2>Reminder Settings</h2>
        
        <div class="setting-item">
          <label>Remind me before meetings:</label>
          <div class="checkbox-group">
            <label class="checkbox-label">
              <input type="checkbox" id="remind-10" checked>
              <span>10 minutes</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="remind-5" checked>
              <span>5 minutes</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="remind-1" checked>
              <span>1 minute</span>
            </label>
          </div>
        </div>

        <div class="setting-item">
          <label for="sync-interval">Sync interval:</label>
          <select id="sync-interval">
            <option value="1">Every 1 minute</option>
            <option value="5">Every 5 minutes</option>
            <option value="10">Every 10 minutes</option>
            <option value="15">Every 15 minutes</option>
            <option value="30">Every 30 minutes</option>
          </select>
        </div>

        <div class="setting-item">
          <label class="checkbox-label">
            <input type="checkbox" id="sound-enabled" checked>
            <span>Play alert sound</span>
          </label>
        </div>
      </section>

      <!-- Google OAuth Credentials -->
      <section class="card collapsible collapsed" id="oauth-section">
        <h2 id="oauth-header" class="collapsible-header">
          Google OAuth Credentials
          <span class="credentials-status" id="credentials-badge"></span>
          <span class="toggle-icon">▼</span>
        </h2>
        <div class="collapsible-content">
          <p class="setting-note">
            Set these once to enable Google Calendar. Stored securely in your OS keychain.
          </p>
          <div class="setting-item">
            <label for="google-client-id">Client ID</label>
            <input type="text" id="google-client-id" placeholder="YOUR_CLIENT_ID">
          </div>
          <div class="setting-item">
            <label for="google-client-secret">Client Secret</label>
            <input type="password" id="google-client-secret" placeholder="YOUR_CLIENT_SECRET">
          </div>
          <div class="setting-actions">
            <button class="btn" id="oauth-save-btn">Save Credentials</button>
            <span class="inline-status" id="oauth-status" aria-live="polite"></span>
          </div>
        </div>
      </section>

      <!-- OAuth Setup Instructions -->
      <section class="card collapsible collapsed" id="setup-section">
        <h2 id="setup-header" class="collapsible-header">
          Setup Instructions
          <span class="toggle-icon">▼</span>
        </h2>
        <div class="collapsible-content">
          <div class="instructions">
            <h3>Google Calendar Setup</h3>
            <ol>
              <li>Go to <a href="#" class="external-link" data-url="https://console.cloud.google.com">Google Cloud Console</a></li>
              <li>Create a new project (or select existing)</li>
              <li>Enable the Google Calendar API</li>
              <li>Complete the OAuth consent screen (APIs &amp; Services)</li>
              <li>Create OAuth 2.0 credentials (Desktop app)</li>
              <li>Copy the Client ID and Client Secret from the credentials page</li>
              <li>Set environment variables:
                <code>GOOGLE_CLIENT_ID</code> and <code>GOOGLE_CLIENT_SECRET</code>
              </li>
            </ol>

            <h3>Where to get your Google keys</h3>
            <ol>
              <li>In Google Cloud Console, open <strong>APIs &amp; Services</strong> → <strong>Credentials</strong></li>
              <li>Select your OAuth client (Desktop app) to view the <strong>Client ID</strong> and <strong>Client Secret</strong></li>
              <li>Alternatively, click <strong>Download JSON</strong> and copy the values from the file</li>
              <li>Make sure the OAuth consent screen is configured for your project</li>
            </ol>
          </div>
        </div>
      </section>
    </main>

    <footer>
      <p>Made with care for people with time blindness</p>
      <p class="version">Version 1.0.0</p>
    </footer>
  </div>

  <script src="script.js"></script>
</body>
</html>
